[supervisord]
nodaemon=true
logfile=/app/logs/supervisord.log
pidfile=/var/run/supervisord.pid

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
stdout_logfile=/app/logs/nginx-stdout.log
stderr_logfile=/app/logs/nginx-stderr.log
priority=10

[program:server]
command=/app/.venv/bin/python /app/server/main.py
directory=/app/server
autostart=true
autorestart=true
stdout_logfile=/app/logs/server-stdout.log
stderr_logfile=/app/logs/server-stderr.log
environment=PYTHONUNBUFFERED="1"
priority=20

[program:facilitator]
command=/app/.venv/bin/python /app/facilitator/main.py
directory=/app/facilitator
autostart=true
autorestart=true
stdout_logfile=/app/logs/facilitator-stdout.log
stderr_logfile=/app/logs/facilitator-stderr.log
environment=PYTHONUNBUFFERED="1"
priority=30
